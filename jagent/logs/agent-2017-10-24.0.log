[ INFO ] [2017-10-24 15:54:40] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 8800 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 15:54:40] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 15:54:40] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 15:54:40 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 15:54:40] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 15:54:41] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 15:54:41] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 15:54:41] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 15:54:41] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 15:54:41] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 15:54:41] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 15:54:42] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 15:54:42] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 15:54:42] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 15:54:42] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 15:54:42] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1660 ms
[ INFO ] [2017-10-24 15:54:42] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 15:54:42] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 15:54:42] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 15:54:42] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 15:54:42] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 15:54:42] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 15:54:42] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 15:54:42] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 15:54:42] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 15:54:42] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 15:54:42] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 15:54:42] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 15:54:42] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 15:54:42] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:54:42] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:54:42] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:54:42] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:54:42] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 15:54:40 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 15:54:42] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 15:54:42] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 15:54:42] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 15:54:42] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 15:54:42] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 15:54:43] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 15:54:43] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 15:54:43] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 15:54:43] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 15:54:43] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Main [57] - Started Main in 2.877 seconds (JVM running for 3.296)
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9399, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=CFG-1.0.0, desc=旧软件版本号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-0.9.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024155443|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 15:54:43] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 15:54:43] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@3f7d94
[ INFO ] [2017-10-24 15:54:48] org.reflections.Reflections [229] - Reflections took 40 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:54:48] org.springframework.beans.factory.xml.XmlBeanDefinitionReader [317] - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[ INFO ] [2017-10-24 15:54:48] org.springframework.jdbc.support.SQLErrorCodesFactory [127] - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[ ERROR] [2017-10-24 15:54:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 15:54:48] com.ethink.agent.util.HttpUtil [52] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.util.HttpUtil [78] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 15:54:51] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301003|240002|20171024155451

[ INFO ] [2017-10-24 15:56:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:56:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 15:56:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@6a2647
[ INFO ] [2017-10-24 15:56:48] org.reflections.Reflections [229] - Reflections took 7 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 15:56:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 15:56:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:58:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:58:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 15:58:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@357c28
[ INFO ] [2017-10-24 15:58:48] org.reflections.Reflections [229] - Reflections took 5 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 15:58:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 15:58:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 15:59:48] com.ethink.agent.util.HttpUtil [131] - 获得下载百分比………………………………………………………………………………
[ INFO ] [2017-10-24 15:59:48] com.ethink.agent.util.HttpUtil [47] - 下载成功…………………………百分比为∞%…………………………………………………………
[ INFO ] [2017-10-24 16:00:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:00:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:00:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@103db80
[ INFO ] [2017-10-24 16:00:48] org.reflections.Reflections [229] - Reflections took 5 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:00:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:00:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:02:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:02:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:02:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1958466
[ INFO ] [2017-10-24 16:02:48] org.reflections.Reflections [229] - Reflections took 5 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:02:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:02:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:04:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:04:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:04:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@d63de
[ INFO ] [2017-10-24 16:04:48] org.reflections.Reflections [229] - Reflections took 6 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:04:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:04:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:06:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:06:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:06:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1bb56c2
[ INFO ] [2017-10-24 16:06:48] org.reflections.Reflections [229] - Reflections took 6 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:06:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:06:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:08:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:08:48] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:08:48] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1445f3
[ INFO ] [2017-10-24 16:08:48] org.reflections.Reflections [229] - Reflections took 5 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:08:48] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:08:48] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:03] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 9116 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 16:10:03] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 16:10:03] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4bd84a: startup date [Tue Oct 24 16:10:03 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 16:10:03] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 16:10:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$4517da08] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:10:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:10:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:10:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:10:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:10:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$4c44fe6d] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:10:05] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 16:10:05] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 16:10:05] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 16:10:05] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 16:10:05] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1619 ms
[ INFO ] [2017-10-24 16:10:05] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 16:10:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 16:10:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 16:10:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 16:10:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 16:10:05] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 16:10:05] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 16:10:05] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 16:10:05] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 16:10:05] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 16:10:05] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 16:10:05] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 16:10:05] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 16:10:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:05] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4bd84a: startup date [Tue Oct 24 16:10:03 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 16:10:05] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 16:10:05] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 16:10:05] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:10:05] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:10:05] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:10:06] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 16:10:06] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 16:10:06] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 16:10:06] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 16:10:06] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Main [57] - Started Main in 3.165 seconds (JVM running for 3.946)
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9399, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=CFG-1.0.0, desc=旧软件版本号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-0.9.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 16:10:06] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 16:10:06] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 16:10:10] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024161006|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@d8bcac
[ INFO ] [2017-10-24 16:10:11] org.reflections.Reflections [229] - Reflections took 45 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:11] org.springframework.beans.factory.xml.XmlBeanDefinitionReader [317] - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[ INFO ] [2017-10-24 16:10:11] org.springframework.jdbc.support.SQLErrorCodesFactory [127] - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[ ERROR] [2017-10-24 16:10:11] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 16:10:11] com.ethink.agent.util.HttpUtil [52] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.util.HttpUtil [78] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 16:10:14] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301003|240002|20171024161014

[ INFO ] [2017-10-24 16:12:11] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:12:11] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:12:11] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1d60f21
[ INFO ] [2017-10-24 16:12:11] org.reflections.Reflections [229] - Reflections took 5 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:12:11] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:12:11] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:12:56] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 8348 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 16:12:56] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 16:12:57] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 16:12:57 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 16:12:57] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 16:12:57] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:12:57] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:12:58] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:12:58] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:12:58] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:12:58] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:12:58] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 16:12:58] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 16:12:58] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 16:12:58] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 16:12:58] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1387 ms
[ INFO ] [2017-10-24 16:12:58] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 16:12:58] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 16:12:58] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 16:12:58] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 16:12:58] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 16:12:58] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 16:12:58] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 16:12:58] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 16:12:58] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 16:12:58] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 16:12:58] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 16:12:58] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 16:12:58] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 16:12:58] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:12:58] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:12:58] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:12:58] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:12:58] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 16:12:57 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 16:12:58] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 16:12:58] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 16:12:58] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:12:58] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:12:58] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:12:59] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 16:12:59] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 16:12:59] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 16:12:59] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 16:12:59] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Main [57] - Started Main in 2.46 seconds (JVM running for 2.881)
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 16:12:59] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024161259|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 16:12:59] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 16:13:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:13:04] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:13:04] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@321dff
[ INFO ] [2017-10-24 16:13:04] org.reflections.Reflections [229] - Reflections took 35 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 16:13:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:13:04] com.ethink.agent.task.mng.TaskStatusManager [83] - 数据库插入task信息成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：ready
[ INFO ] [2017-10-24 16:13:05] com.ethink.agent.task.mng.TaskManager [145] - 任务已加入调度。任务id:a3b5c6d7f09c8e6abbccddee55446677任务类型：atmcUpdateAct执行时间：2012-7-19 9:37:15.000任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 16:13:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:13:05] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 16:13:05] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 16:13:05] com.ethink.agent.util.HttpUtil [52] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.util.HttpUtil [78] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 16:13:07] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301003|240002|20171024161307

[ INFO ] [2017-10-24 16:15:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:15:04] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:15:04] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@18e28dc
[ INFO ] [2017-10-24 16:15:04] org.reflections.Reflections [229] - Reflections took 6 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:15:04] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:15:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:17:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:17:04] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:17:04] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1d13bd2
[ INFO ] [2017-10-24 16:17:04] org.reflections.Reflections [229] - Reflections took 3 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:17:04] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:17:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:18:05] com.ethink.agent.util.HttpUtil [131] - 获得下载百分比………………………………………………………………………………
[ INFO ] [2017-10-24 16:18:05] com.ethink.agent.util.HttpUtil [47] - 下载成功…………………………百分比为100.00%…………………………………………………………
[ INFO ] [2017-10-24 16:19:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:19:04] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:19:04] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1d3b2d3
[ INFO ] [2017-10-24 16:19:04] org.reflections.Reflections [229] - Reflections took 5 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 16:19:04] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 16:19:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:21:55] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 9180 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 16:21:55] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 16:21:55] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4bd84a: startup date [Tue Oct 24 16:21:55 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 16:21:55] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 16:21:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$ea9b068f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:21:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:21:57] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:21:57] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:21:57] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:21:57] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$f1c82af4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 16:21:57] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 16:21:57] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 16:21:57] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 16:21:57] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 16:21:57] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1677 ms
[ INFO ] [2017-10-24 16:21:57] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 16:21:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 16:21:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 16:21:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 16:21:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 16:21:57] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 16:21:57] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 16:21:57] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 16:21:57] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 16:21:57] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 16:21:57] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 16:21:57] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 16:21:57] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 16:21:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:21:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:21:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:21:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:21:58] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4bd84a: startup date [Tue Oct 24 16:21:55 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 16:21:58] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 16:21:58] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 16:21:58] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:21:58] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:21:58] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 16:21:58] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 16:21:58] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 16:21:58] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 16:21:58] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 16:21:58] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Main [57] - Started Main in 3.153 seconds (JVM running for 3.805)
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 16:21:58] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 16:21:58] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 16:22:03] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ ERROR] [2017-10-24 16:22:04] com.ethink.agent.util.HttpUtil [117] - HttpClient close error:
java.lang.NullPointerException: null
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:112)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ ERROR] [2017-10-24 16:22:04] com.ethink.agent.net.HttpPolling [40] - HTTP轮询请求异常
org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 16:22:04] org.quartz.core.JobRunShell [207] - Job httppollingGroup.httppolling threw a JobExecutionException: 
org.quartz.JobExecutionException: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:41)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	... 2 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 16:22:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:24:03] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ ERROR] [2017-10-24 16:24:04] com.ethink.agent.util.HttpUtil [117] - HttpClient close error:
java.lang.NullPointerException: null
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:112)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ ERROR] [2017-10-24 16:24:04] com.ethink.agent.net.HttpPolling [40] - HTTP轮询请求异常
org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 16:24:04] org.quartz.core.JobRunShell [207] - Job httppollingGroup.httppolling threw a JobExecutionException: 
org.quartz.JobExecutionException: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:41)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	... 2 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 16:24:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:26:03] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 16:26:03] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 16:26:03] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@140b842
[ INFO ] [2017-10-24 16:26:03] org.reflections.Reflections [229] - Reflections took 49 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 16:26:04] com.ethink.agent.task.mng.TaskStatusManager [83] - 数据库插入task信息成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：ready
[ INFO ] [2017-10-24 16:26:04] com.ethink.agent.task.mng.TaskManager [145] - 任务已加入调度。任务id:a3b5c6d7f09c8e6abbccddee55446677任务类型：atmcUpdateAct执行时间：2012-7-19 9:37:15.000任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 16:26:04] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:10:42] com.ethink.agent.util.HttpUtil [52] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:12:16] com.ethink.agent.util.HttpUtil [78] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:14:24] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 9976 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:14:24] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:14:25] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:14:25 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:14:25] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:14:25] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:14:25] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:14:26] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:14:26] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:14:26] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:14:26] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:14:26] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:14:26] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:14:26] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:14:26] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:14:26] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1464 ms
[ INFO ] [2017-10-24 17:14:26] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:14:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:14:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:14:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:14:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:14:26] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:14:26] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:14:26] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:14:26] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:14:26] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:14:26] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:14:26] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:14:26] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:14:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:14:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:14:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:14:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:14:26] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:14:25 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:14:26] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:14:26] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:14:26] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:14:26] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:14:27] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:14:27] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:14:27] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:14:27] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:14:27] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:14:27] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Main [57] - Started Main in 2.55 seconds (JVM running for 3.026)
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:14:27] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024171427|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 17:14:27] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:14:32] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ ERROR] [2017-10-24 17:14:33] com.ethink.agent.util.HttpUtil [117] - HttpClient close error:
java.lang.NullPointerException: null
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:112)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ ERROR] [2017-10-24 17:14:33] com.ethink.agent.net.HttpPolling [40] - HTTP轮询请求异常
org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 17:14:33] org.quartz.core.JobRunShell [207] - Job httppollingGroup.httppolling threw a JobExecutionException: 
org.quartz.JobExecutionException: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:41)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	... 2 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 17:14:33] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:16:11] com.ethink.agent.util.HttpUtil [52] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:16:11] com.ethink.agent.util.HttpUtil [78] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:22:53] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 6972 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:22:53] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:22:53] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:22:53 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:22:53] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:22:53] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:22:53] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:22:54] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:22:54] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:22:54] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:22:54] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:22:54] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:22:54] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:22:54] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:22:54] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:22:54] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1447 ms
[ INFO ] [2017-10-24 17:22:54] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:22:54] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:22:54] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:22:54] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:22:54] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:22:54] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:22:54] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:22:54] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:22:54] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:22:54] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:22:54] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:22:54] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:22:54] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:22:54] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:22:54] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:22:54] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:22:54] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:22:54] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:22:53 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:22:55] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:22:55] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:22:55] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:22:55] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:22:55] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:22:55] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:22:55] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:22:55] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:22:55] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:22:55] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Main [57] - Started Main in 2.566 seconds (JVM running for 2.961)
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024172255|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 17:22:55] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:22:55] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@c0ddfc
[ INFO ] [2017-10-24 17:23:00] org.reflections.Reflections [229] - Reflections took 31 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.task.mng.TaskStatusManager [83] - 数据库插入task信息成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：ready
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.task.mng.TaskManager [145] - 任务已加入调度。任务id:a3b5c6d7f09c8e6abbccddee55446677任务类型：atmcUpdateAct执行时间：2012-7-19 9:37:15.000任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:23:00] com.ethink.agent.util.HttpUtil [54] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.util.HttpUtil [80] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.util.HttpUtil [147] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.util.HttpUtil [147] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.util.HttpUtil [160] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.util.HttpUtil [160] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 17:23:03] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301003|240002|20171024172303

[ INFO ] [2017-10-24 17:25:00] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:25:00] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:25:00] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1f65664
[ INFO ] [2017-10-24 17:25:00] org.reflections.Reflections [229] - Reflections took 3 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 17:25:00] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 17:25:00] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:18] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 7636 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:26:18] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:26:18] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:26:18 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:26:18] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:26:19] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:26:19] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:26:19] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:26:19] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:26:19] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:26:19] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:26:19] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:26:19] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:26:19] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:26:19] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:26:19] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1362 ms
[ INFO ] [2017-10-24 17:26:19] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:26:19] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:26:19] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:26:19] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:26:19] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:26:19] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:26:19] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:26:19] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:26:19] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:26:19] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:26:19] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:26:19] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:26:19] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:26:19] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:19] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:19] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:19] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:20] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:26:18 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:26:20] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:26:20] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:26:20] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:26:20] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:26:20] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:26:20] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:26:20] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:26:20] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:26:20] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:26:20] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Main [57] - Started Main in 2.409 seconds (JVM running for 2.793)
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 17:26:20] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:26:20] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024172620|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 17:26:25] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:25] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:26:25] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@42fd1f
[ INFO ] [2017-10-24 17:26:25] org.reflections.Reflections [229] - Reflections took 38 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:26:25] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:26] com.ethink.agent.task.mng.TaskStatusManager [83] - 数据库插入task信息成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：ready
[ INFO ] [2017-10-24 17:26:26] com.ethink.agent.task.mng.TaskManager [145] - 任务已加入调度。任务id:a3b5c6d7f09c8e6abbccddee55446677任务类型：atmcUpdateAct执行时间：2012-7-19 9:37:15.000任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 17:26:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:26:26] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 17:26:26] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:26:26] com.ethink.agent.util.HttpUtil [52] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.util.HttpUtil [78] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.util.HttpUtil [145] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.util.HttpUtil [158] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 17:26:28] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301003|240002|20171024172628

[ INFO ] [2017-10-24 17:28:25] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:28:25] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:28:25] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1958466
[ INFO ] [2017-10-24 17:28:25] org.reflections.Reflections [229] - Reflections took 6 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 17:28:25] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 17:28:25] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:30:25] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:30:25] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:30:25] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@229c91
[ INFO ] [2017-10-24 17:30:25] org.reflections.Reflections [229] - Reflections took 12 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 17:30:25] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.quartz.ObjectAlreadyExistsException: Unable to store Job : 'com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677', because one already exists with this identification.
	at org.quartz.simpl.RAMJobStore.storeJob(RAMJobStore.java:279)
	at org.quartz.simpl.RAMJobStore.storeJobAndTrigger(RAMJobStore.java:251)
	at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:886)
	at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:249)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:141)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 17:30:25] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:03] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 5088 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:31:03] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:31:03] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@238dd0: startup date [Tue Oct 24 17:31:03 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:31:03] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:31:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$baa802e6] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:04] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$c1d5274b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:05] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:31:05] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:31:05] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:31:05] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:31:05] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1607 ms
[ INFO ] [2017-10-24 17:31:05] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:31:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:05] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:05] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:31:05] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:31:05] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:31:05] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:31:05] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:31:05] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:31:05] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:31:05] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:31:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:05] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:05] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@238dd0: startup date [Tue Oct 24 17:31:03 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:31:05] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:31:05] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:31:05] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:31:05] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:31:05] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:31:06] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:31:06] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:31:06] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:31:06] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:31:06] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Main [57] - Started Main in 3.092 seconds (JVM running for 3.693)
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:31:06] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:31:06] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:31:11] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:11] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:31:11] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1747317
[ INFO ] [2017-10-24 17:31:11] org.reflections.Reflections [229] - Reflections took 48 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:31:11] org.springframework.beans.factory.xml.XmlBeanDefinitionReader [317] - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[ INFO ] [2017-10-24 17:31:11] org.springframework.jdbc.support.SQLErrorCodesFactory [127] - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[ ERROR] [2017-10-24 17:31:11] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 17:31:11] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:18] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 17:31:19] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 17:31:22] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024173106|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 17:31:55] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 5696 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:31:55] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:31:55] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@11de2d6: startup date [Tue Oct 24 17:31:55 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:31:55] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:31:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$ca38888] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:56] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$13d0aced] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:31:56] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:31:56] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:31:56] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:31:56] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:31:56] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1622 ms
[ INFO ] [2017-10-24 17:31:57] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:31:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:57] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:31:57] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:31:57] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:31:57] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:31:57] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:31:57] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:31:57] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:31:57] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:31:57] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:31:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:31:57] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@11de2d6: startup date [Tue Oct 24 17:31:55 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:31:57] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:31:57] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:31:57] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:31:57] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:31:57] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:31:57] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:31:57] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:31:57] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:31:57] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:31:57] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:31:57] com.ethink.agent.Main [57] - Started Main in 3.101 seconds (JVM running for 3.736)
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:31:58] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:31:58] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:32:03] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:32:03] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:32:03] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1eea99b
[ INFO ] [2017-10-24 17:32:03] org.reflections.Reflections [229] - Reflections took 48 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:32:03] org.springframework.beans.factory.xml.XmlBeanDefinitionReader [317] - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[ INFO ] [2017-10-24 17:32:03] org.springframework.jdbc.support.SQLErrorCodesFactory [127] - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[ ERROR] [2017-10-24 17:32:03] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 17:32:03] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:32:03] com.ethink.agent.util.ServerThread [43] - 通过输入流接收客户端信息  
[ INFO ] [2017-10-24 17:32:27] com.ethink.agent.net.RDPMessageSend [30] - 向127.0.0.1发送报文，端口号为：9199
[ INFO ] [2017-10-24 17:33:06] com.ethink.agent.net.RDPMessageSend [35] - 向地址[/127.0.0.1:9199]发送报文:::301000|240001|20171024173158|ADV-2012-3-24|CFG-1.0.0|

[ INFO ] [2017-10-24 17:33:49] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 9852 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:33:49] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:33:49] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@1517588: startup date [Tue Oct 24 17:33:49 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:33:49] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:33:50] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$a4dffa8b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:33:50] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:33:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:33:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:33:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:33:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$ac0d1ef0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:33:51] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:33:51] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:33:51] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:33:51] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:33:51] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1633 ms
[ INFO ] [2017-10-24 17:33:51] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:33:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:33:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:33:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:33:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:33:51] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:33:51] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:33:51] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:33:51] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:33:51] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:33:51] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:33:51] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:33:51] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:33:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:33:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:33:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:33:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:33:52] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@1517588: startup date [Tue Oct 24 17:33:49 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:33:52] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:33:52] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:33:52] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:33:52] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:33:52] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:33:52] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:33:52] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:33:52] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:33:52] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:33:52] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Main [57] - Started Main in 3.111 seconds (JVM running for 3.679)
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:33:52] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:33:52] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:33:57] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:33:57] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:33:57] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@171b6b9
[ INFO ] [2017-10-24 17:33:58] org.reflections.Reflections [229] - Reflections took 50 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:33:58] org.springframework.beans.factory.xml.XmlBeanDefinitionReader [317] - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[ INFO ] [2017-10-24 17:33:58] org.springframework.jdbc.support.SQLErrorCodesFactory [127] - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[ ERROR] [2017-10-24 17:33:58] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 17:33:58] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:34:18] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:34:18] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 17:34:25] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:34:25] com.ethink.agent.util.HttpUtil [52] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:34:42] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 7116 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:34:42] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:34:42] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4bd84a: startup date [Tue Oct 24 17:34:42 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:34:43] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:34:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$ab1778ab] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:34:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:34:44] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:34:44] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:34:44] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:34:44] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$b2449d10] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:34:44] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:34:44] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:34:44] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:34:44] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:34:44] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1593 ms
[ INFO ] [2017-10-24 17:34:44] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:34:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:34:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:34:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:34:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:34:44] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:34:44] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:34:44] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:34:44] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:34:44] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:34:44] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:34:44] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:34:44] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:34:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:34:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:34:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:34:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:34:45] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4bd84a: startup date [Tue Oct 24 17:34:42 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:34:45] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:34:45] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:34:45] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:34:45] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:34:45] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:34:45] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:34:45] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:34:45] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:34:45] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:34:45] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Main [57] - Started Main in 3.061 seconds (JVM running for 3.678)
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:34:45] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:34:45] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:34:50] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:34:51] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:34:51] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1e4b34f
[ INFO ] [2017-10-24 17:34:51] org.reflections.Reflections [229] - Reflections took 36 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:34:51] org.springframework.beans.factory.xml.XmlBeanDefinitionReader [317] - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[ INFO ] [2017-10-24 17:34:51] org.springframework.jdbc.support.SQLErrorCodesFactory [127] - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[ ERROR] [2017-10-24 17:34:51] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 17:34:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:35:01] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:35:30] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:37:42] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 7528 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:37:42] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:37:42] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:37:42 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:37:42] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:37:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:37:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:37:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:37:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:37:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:37:43] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:37:43] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:37:43] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:37:43] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:37:43] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:37:43] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1387 ms
[ INFO ] [2017-10-24 17:37:44] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:37:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:37:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:37:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:37:44] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:37:44] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:37:44] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:37:44] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:37:44] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:37:44] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:37:44] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:37:44] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:37:44] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:37:44] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:37:42 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:37:44] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:37:44] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:37:44] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:37:44] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:37:44] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:37:44] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:37:44] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:37:44] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:37:44] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:37:44] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Main [57] - Started Main in 2.47 seconds (JVM running for 2.864)
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:37:44] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:37:44] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:37:45] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:37:49] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ ERROR] [2017-10-24 17:37:51] com.ethink.agent.util.HttpUtil [117] - HttpClient close error:
java.lang.NullPointerException: null
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:112)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ ERROR] [2017-10-24 17:37:51] com.ethink.agent.net.HttpPolling [40] - HTTP轮询请求异常
org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 17:37:51] org.quartz.core.JobRunShell [207] - Job httppollingGroup.httppolling threw a JobExecutionException: 
org.quartz.JobExecutionException: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:41)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	... 2 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 17:37:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:38:35] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 3832 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:38:35] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:38:35] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:38:35 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:38:35] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:38:36] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:38:36] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:38:36] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:38:36] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:38:36] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:38:36] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:38:36] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:38:36] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:38:36] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:38:36] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:38:36] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1484 ms
[ INFO ] [2017-10-24 17:38:37] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:38:37] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:38:37] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:38:37] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:38:37] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:38:37] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:38:37] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:38:37] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:38:37] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:38:37] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:38:37] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:38:37] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:38:37] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:38:37] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:38:35 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:38:37] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:38:37] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:38:37] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:38:37] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:38:37] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:38:37] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:38:37] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:38:37] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:38:37] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:38:37] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Main [57] - Started Main in 2.616 seconds (JVM running for 3.005)
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:38:37] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:38:37] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:38:38] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:38:42] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ ERROR] [2017-10-24 17:38:44] com.ethink.agent.util.HttpUtil [117] - HttpClient close error:
java.lang.NullPointerException: null
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:112)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ ERROR] [2017-10-24 17:38:44] com.ethink.agent.net.HttpPolling [40] - HTTP轮询请求异常
org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 17:38:44] org.quartz.core.JobRunShell [207] - Job httppollingGroup.httppolling threw a JobExecutionException: 
org.quartz.JobExecutionException: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:41)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to 192.168.4.61:8080 [/192.168.4.61] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
	at com.ethink.agent.util.HttpUtil.sendGetRequest(HttpUtil.java:96)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:35)
	... 2 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
	... 13 common frames omitted
[ INFO ] [2017-10-24 17:38:44] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:45] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 9000 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:39:45] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:39:45] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:39:45 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:39:45] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:39:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:39:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:39:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:39:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:39:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:39:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:39:46] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:39:46] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:39:46] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:39:47] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:39:47] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1452 ms
[ INFO ] [2017-10-24 17:39:47] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:39:47] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:39:47] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:39:47] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:39:47] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:39:47] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:39:47] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:39:47] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:39:47] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:39:47] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:39:47] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:39:47] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:39:47] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:47] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:39:45 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:39:47] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:39:47] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:39:47] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:39:47] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:39:47] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:39:47] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:39:47] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:39:47] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:39:47] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:39:47] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Main [57] - Started Main in 2.543 seconds (JVM running for 2.932)
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:39:47] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:39:47] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:39:48] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:39:52] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@193b45e
[ INFO ] [2017-10-24 17:39:53] org.reflections.Reflections [229] - Reflections took 41 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.task.mng.TaskStatusManager [83] - 数据库插入task信息成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：ready
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.task.mng.TaskManager [145] - 任务已加入调度。任务id:a3b5c6d7f09c8e6abbccddee55446677任务类型：atmcUpdateAct执行时间：2012-7-19 9:37:15.000任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:39:53] com.ethink.agent.util.HttpUtil [55] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:39:55] com.ethink.agent.util.HttpUtil [81] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:39:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:39:55] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:39:55] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:39:55] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:39:55] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:39:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ ERROR] [2017-10-24 17:39:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [116] - 升级失败
java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 17:39:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:39:56] org.quartz.core.JobRunShell [207] - Job com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677 threw a JobExecutionException: 
org.quartz.JobExecutionException: 升级失败
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:119)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	... 2 common frames omitted
[ INFO ] [2017-10-24 17:39:56] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:39:56] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：error
[ INFO ] [2017-10-24 17:39:59] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:40:10] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:40:21] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:40:32] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:40:43] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:40:54] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:41:05] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:41:16] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:41:27] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:41:38] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:41:49] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:41:52] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:41:52] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:41:52] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@18e4939
[ INFO ] [2017-10-24 17:41:52] org.reflections.Reflections [229] - Reflections took 8 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:41:52] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:41:52] org.springframework.beans.factory.xml.XmlBeanDefinitionReader [317] - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[ INFO ] [2017-10-24 17:41:53] org.springframework.jdbc.support.SQLErrorCodesFactory [127] - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[ ERROR] [2017-10-24 17:41:53] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 17:41:53] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:41:53] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 17:41:53] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:41:53] com.ethink.agent.util.HttpUtil [55] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:41:55] com.ethink.agent.util.HttpUtil [81] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:41:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:41:55] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:41:55] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:41:55] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:41:55] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:41:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ ERROR] [2017-10-24 17:41:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [116] - 升级失败
java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 17:41:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:41:56] org.quartz.core.JobRunShell [207] - Job com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677 threw a JobExecutionException: 
org.quartz.JobExecutionException: 升级失败
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:119)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	... 2 common frames omitted
[ INFO ] [2017-10-24 17:41:56] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:41:56] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：error
[ INFO ] [2017-10-24 17:42:00] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:42:11] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:42:22] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:42:33] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:42:44] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:42:55] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:43:06] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:43:17] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:43:28] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:43:39] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:43:50] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:43:52] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:43:52] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:43:52] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@6a2647
[ INFO ] [2017-10-24 17:43:52] org.reflections.Reflections [229] - Reflections took 6 ms to scan 1 urls, producing 5 keys and 9 values 
[ ERROR] [2017-10-24 17:43:52] com.ethink.agent.task.mng.TaskManager [224] - 任务添加失败
org.springframework.jdbc.UncategorizedSQLException: 
### Error updating database.  Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
### The error may involve com.ethink.agent.db.TaskFunctionDao.insertTaskInfo-Inline
### The error occurred while setting parameters
### SQL: INSERT into task (taskId,planid,taskStatus,taskData) VALUES (?,?,?,?)
### Cause: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
; uncategorized SQLException for SQL []; SQL state [null]; error code [19]; [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId); nested exception is java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:84)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:371)
	at com.sun.proxy.$Proxy43.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:240)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:51)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:52)
	at com.sun.proxy.$Proxy56.insertTaskInfo(Unknown Source)
	at com.ethink.agent.task.mng.TaskStatusManager.insert(TaskStatusManager.java:81)
	at com.ethink.agent.task.mng.TaskManager.addTask(TaskManager.java:143)
	at com.ethink.agent.task.mng.TaskManager.event(TaskManager.java:222)
	at com.ethink.agent.event.EventHandler.fireEvent(EventHandler.java:33)
	at com.ethink.agent.net.HttpPolling.execute(HttpPolling.java:38)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to constraint violation (UNIQUE constraint failed: task.taskId)
	at org.sqlite.core.DB.newSQLException(DB.java:890)
	at org.sqlite.core.DB.newSQLException(DB.java:901)
	at org.sqlite.core.DB.execute(DB.java:810)
	at org.sqlite.jdbc3.JDBC3PreparedStatement.execute(JDBC3PreparedStatement.java:50)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:44)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:69)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:48)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:105)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:71)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:152)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:358)
	... 12 common frames omitted
[ INFO ] [2017-10-24 17:43:52] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:43:52] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:43:53] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 17:43:53] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:43:53] com.ethink.agent.util.HttpUtil [55] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:43:55] com.ethink.agent.util.HttpUtil [81] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:43:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:43:55] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:43:55] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:43:55] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:43:55] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:43:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ ERROR] [2017-10-24 17:43:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [116] - 升级失败
java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 17:43:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:43:56] org.quartz.core.JobRunShell [207] - Job com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677 threw a JobExecutionException: 
org.quartz.JobExecutionException: 升级失败
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:119)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	... 2 common frames omitted
[ INFO ] [2017-10-24 17:43:56] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:43:56] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：error
[ INFO ] [2017-10-24 17:44:01] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:44:12] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:44:23] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:48:50] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 3976 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:48:50] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:48:50] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:48:50 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:48:50] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:48:50] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:48:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:48:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:48:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:48:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:48:51] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:48:51] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:48:51] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:48:51] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:48:51] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:48:51] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1449 ms
[ INFO ] [2017-10-24 17:48:51] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:48:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:48:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:48:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:48:51] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:48:51] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:48:51] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:48:51] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:48:51] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:48:51] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:48:51] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:48:51] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:48:51] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:48:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:48:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:48:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:48:51] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:48:52] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:48:50 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:48:52] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:48:52] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:48:52] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:48:52] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:48:52] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:48:52] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:48:52] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:48:52] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:48:52] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:48:52] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Main [57] - Started Main in 2.515 seconds (JVM running for 2.887)
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:48:52] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:48:52] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:48:53] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:49:24] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 9768 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 17:49:25] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 17:49:25] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:49:25 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:49:25] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 17:49:25] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:49:25] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:49:25] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:49:25] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:49:25] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:49:26] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 17:49:26] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 17:49:26] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 17:49:26] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 17:49:26] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 17:49:26] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1416 ms
[ INFO ] [2017-10-24 17:49:26] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 17:49:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 17:49:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 17:49:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 17:49:26] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 17:49:26] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 17:49:26] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 17:49:26] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 17:49:26] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 17:49:26] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 17:49:26] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 17:49:26] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 17:49:26] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 17:49:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:26] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:26] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 17:49:25 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 17:49:26] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 17:49:26] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 17:49:26] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:49:26] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:49:26] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 17:49:27] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 17:49:27] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 17:49:27] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 17:49:27] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 17:49:27] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Main [57] - Started Main in 2.483 seconds (JVM running for 2.874)
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [104] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=DEV_NUM, value=12345678, desc=设备编号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=NEW_SOF_VER, value=ADV-2012-3-24, desc=最新软件版本号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=NEW_ADV_VER, value=CFG-1.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=NEW_CFG_VER, value=0000, desc=最新配置版本号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=OLD_SOF_VER, value=ADV-2012-3-20, desc=旧软件版本号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=OLD_ADV_VER, value=CFG-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [106] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Agent [108] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 17:49:27] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 17:49:27] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 17:49:28] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.event.EventHandler [27] - ====Event=====com.ethink.agent.event.Event@1aa50df
[ INFO ] [2017-10-24 17:49:32] org.reflections.Reflections [229] - Reflections took 31 ms to scan 1 urls, producing 5 keys and 9 values 
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.task.mng.TaskStatusManager [83] - 数据库插入task信息成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：ready
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.task.mng.TaskManager [145] - 任务已加入调度。任务id:a3b5c6d7f09c8e6abbccddee55446677任务类型：atmcUpdateAct执行时间：2012-7-19 9:37:15.000任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:49:32] com.ethink.agent.util.HttpUtil [55] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 17:49:35] com.ethink.agent.util.HttpUtil [81] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 17:49:35] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:49:35] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:49:35] com.ethink.agent.util.HttpUtil [148] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 17:49:35] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:49:35] com.ethink.agent.util.HttpUtil [161] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 17:49:35] com.ethink.agent.task.executor.server.RDPUpdateExecutor [98] - rdp更新文件成功
[ ERROR] [2017-10-24 17:49:36] com.ethink.agent.task.executor.server.RDPUpdateExecutor [116] - 升级失败
java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 17:49:36] com.ethink.agent.task.executor.server.RDPUpdateExecutor [249] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 17:49:36] org.quartz.core.JobRunShell [207] - Job com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677 threw a JobExecutionException: 
org.quartz.JobExecutionException: 升级失败
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:119)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:114)
	... 2 common frames omitted
[ INFO ] [2017-10-24 17:49:36] com.ethink.agent.task.mng.TaskManager [56] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 17:49:36] com.ethink.agent.task.mng.TaskStatusManager [58] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：error
[ INFO ] [2017-10-24 17:49:39] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 18:44:45] com.ethink.agent.Main [48] - Starting Main on ifan-PC with PID 9176 (E:\project\2017.10.20\jagent\target\classes started by ifan in E:\project\2017.10.20\jagent)
[ INFO ] [2017-10-24 18:44:45] com.ethink.agent.Main [661] - No active profile set, falling back to default profiles: default
[ INFO ] [2017-10-24 18:44:45] org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext [582] - Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 18:44:45 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 18:44:45] org.hibernate.validator.internal.util.Version [30] - HV000001: Hibernate Validator 5.2.4.Final
[ INFO ] [2017-10-24 18:44:45] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'myBatisConfiguration' of type [class com.ethink.agent.db.MyBatisConfiguration$$EnhancerBySpringCGLIB$$828b0917] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 18:44:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'dataSource' of type [class org.apache.tomcat.jdbc.pool.DataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 18:44:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'sqlSessionFactory' of type [class org.apache.ibatis.session.defaults.DefaultSqlSessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 18:44:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'taskFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 18:44:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'agentFunctionDao' of type [class org.mybatis.spring.mapper.MapperFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 18:44:46] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [325] - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [class org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$89b82d7c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[ INFO ] [2017-10-24 18:44:46] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [87] - Tomcat initialized with port(s): 51001 (http)
[ INFO ] [2017-10-24 18:44:46] org.apache.catalina.core.StandardService [179] - Starting service Tomcat
[ INFO ] [2017-10-24 18:44:46] org.apache.catalina.core.StandardEngine [179] - Starting Servlet Engine: Apache Tomcat/8.5.6
[ INFO ] [2017-10-24 18:44:46] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [179] - Initializing Spring embedded WebApplicationContext
[ INFO ] [2017-10-24 18:44:46] org.springframework.web.context.ContextLoader [276] - Root WebApplicationContext: initialization completed in 1350 ms
[ INFO ] [2017-10-24 18:44:46] org.springframework.boot.web.servlet.ServletRegistrationBean [190] - Mapping servlet: 'dispatcherServlet' to [/]
[ INFO ] [2017-10-24 18:44:46] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'characterEncodingFilter' to: [/*]
[ INFO ] [2017-10-24 18:44:46] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[ INFO ] [2017-10-24 18:44:46] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'httpPutFormContentFilter' to: [/*]
[ INFO ] [2017-10-24 18:44:46] org.springframework.boot.web.servlet.FilterRegistrationBean [258] - Mapping filter: 'requestContextFilter' to: [/*]
[ INFO ] [2017-10-24 18:44:46] org.quartz.impl.StdSchedulerFactory [1184] - Using default implementation for ThreadExecutor
[ INFO ] [2017-10-24 18:44:46] org.quartz.simpl.SimpleThreadPool [268] - Job execution threads will use class loader of thread: main
[ INFO ] [2017-10-24 18:44:46] org.quartz.core.SchedulerSignalerImpl [61] - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[ INFO ] [2017-10-24 18:44:46] org.quartz.core.QuartzScheduler [240] - Quartz Scheduler v.2.2.1 created.
[ INFO ] [2017-10-24 18:44:46] org.quartz.simpl.RAMJobStore [155] - RAMJobStore initialized.
[ INFO ] [2017-10-24 18:44:46] org.quartz.core.QuartzScheduler [305] - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[ INFO ] [2017-10-24 18:44:46] org.quartz.impl.StdSchedulerFactory [1339] - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[ INFO ] [2017-10-24 18:44:46] org.quartz.impl.StdSchedulerFactory [1343] - Quartz scheduler version: 2.2.1
[ INFO ] [2017-10-24 18:44:46] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:46] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:46] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:46] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:47] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter [534] - Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@12f203f: startup date [Tue Oct 24 18:44:45 CST 2017]; root of context hierarchy
[ INFO ] [2017-10-24 18:44:47] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[ INFO ] [2017-10-24 18:44:47] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping [543] - Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[ INFO ] [2017-10-24 18:44:47] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 18:44:47] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 18:44:47] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping [354] - Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[ INFO ] [2017-10-24 18:44:47] org.springframework.jmx.export.annotation.AnnotationMBeanExporter [431] - Registering beans for JMX exposure on startup
[ INFO ] [2017-10-24 18:44:47] org.apache.coyote.http11.Http11NioProtocol [179] - Initializing ProtocolHandler ["http-nio-51001"]
[ INFO ] [2017-10-24 18:44:47] org.apache.coyote.http11.Http11NioProtocol [179] - Starting ProtocolHandler [http-nio-51001]
[ INFO ] [2017-10-24 18:44:47] org.apache.tomcat.util.net.NioSelectorPool [179] - Using a shared selector for servlet write/read
[ INFO ] [2017-10-24 18:44:47] org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer [185] - Tomcat started on port(s): 51001 (http)
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Main [57] - Started Main in 2.425 seconds (JVM running for 2.833)
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [105] - ----------------------========系统初始配置信息=========-------------------------
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=LISTEN_PORT4TASKSERVER, value=9199, desc=Task TCP主动监听端口}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=TASK_SERVER, value=http://192.168.4.61:8080/testweb, desc=Task Server 地址}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=FILE_SERVER, value=http://127.0.0.1:80, desc=文件服务器地址}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=LISTEN_PORT4RDP, value=9299, desc=RDP报文监听端口}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=RDP_PORT, value=9299, desc=RDP报文发送端口}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=TASK_LOOP_TIME, value=120, desc=Http 轮询时间间隔,单位秒}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=ATMC_VER, value=0, desc=atmc版本号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=AGENT_VER, value=0, desc=agent版本号.}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=DEV_NUM, value=13345678, desc=设备编号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=TRNEJ, value=0000, desc=命令流水号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=CTIME, value=0000, desc=C端发包时间}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=NEW_SOF_VER, value=SOF-2012-3-10, desc=最新软件版本号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=NEW_ADV_VER, value=ADV-2.0.0, desc=最新广告版本号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=NEW_CFG_VER, value=CFG-2.0.0, desc=最新配置版本号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=OLD_SOF_VER, value=SOF-2012-3-01, desc=旧软件版本号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=OLD_ADV_VER, value=ADV-1.0.0, desc=旧广告版本号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [107] - {name=OLD_CFG_VER, value=0000, desc=旧配置版本号}
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Agent [109] - ----------------------============================-------------------------
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.net.TcpListening [45] - TCP报文监听启动,port 9199
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.net.RDPListening [31] - RDPListening+++++++++++++++star++++++++++++
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.net.RDPListening [56] - RDPListening++++++++++++++++++end+++++++++
[ INFO ] [2017-10-24 18:44:47] org.quartz.core.QuartzScheduler [575] - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.net.HttpPollingScheduler [55] - HTTP轮询启动,轮询间隔：120,将于120秒后开始第一次轮询
[ INFO ] [2017-10-24 18:44:47] com.ethink.agent.Main [47] - =================jagent started======================
[ INFO ] [2017-10-24 18:44:48] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 18:44:52] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:52] com.ethink.agent.net.HttpPolling [36] - HTTP轮询发送请求url:http://192.168.4.61:8080/testweb/task/planReqAct.ebf,参数:atmcVer=0&agentVer=0,响应：<root>	<disttaskno>1</disttaskno>	<disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask>        </root>
[ INFO ] [2017-10-24 18:44:52] com.ethink.agent.event.EventHandler [28] - ====Event=====com.ethink.agent.event.Event@18339f4
[ INFO ] [2017-10-24 18:44:52] org.reflections.Reflections [229] - Reflections took 35 ms to scan 1 urls, producing 4 keys and 8 values 
[ INFO ] [2017-10-24 18:44:52] com.ethink.agent.task.mng.TaskStatusManager [85] - 数据库插入task信息成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：ready
[ INFO ] [2017-10-24 18:44:52] com.ethink.agent.task.mng.TaskManager [157] - 任务已加入调度。任务id:a3b5c6d7f09c8e6abbccddee55446677任务类型：atmcUpdateAct执行时间：2012-7-19 9:37:15.000任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 18:44:52] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:53] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:53] com.ethink.agent.task.mng.TaskStatusManager [59] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：before_execute
[ INFO ] [2017-10-24 18:44:53] com.ethink.agent.task.executor.server.RDPUpdateExecutor [82] - RDP升级开始，开始时间：2017-10-24 18:44:53,任务报文：<root><disttask>		<tasktype>atmcUpdateAct</tasktype>		<planid>a59a3aa2beb13bbbc2cc5cade362d0dd</planid>		<taskid>a3b5c6d7f09c8e6abbccddee55446677</taskid>		<termid>test0091</termid>		<exectime> 2012-7-19 9:37:15.000</exectime>		<valid>30</valid>        <extrapara>    	<FileURL>http://192.168.4.61:8080/testweb/abc.zip </FileURL>        <FileMD5>29c1ba159ef8de824712c0a4d4324157</FileMD5>	</extrapara>	</disttask></root>
[ INFO ] [2017-10-24 18:44:53] com.ethink.agent.task.executor.server.RDPUpdateExecutor [257] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 18:44:53] com.ethink.agent.util.HttpUtil [53] - 开始下载文件啦++++++++++++++++++++++++++++++
[ INFO ] [2017-10-24 18:44:55] com.ethink.agent.util.HttpUtil [79] - 文件下载成功………………………………………………………………………………
[ INFO ] [2017-10-24 18:44:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [257] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 18:44:55] com.ethink.agent.util.HttpUtil [146] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 18:44:55] com.ethink.agent.util.HttpUtil [146] - 文件复制………………………………………………………………………………
[ INFO ] [2017-10-24 18:44:55] com.ethink.agent.util.HttpUtil [159] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 18:44:55] com.ethink.agent.util.HttpUtil [159] - 文件复制完成………………………………………………………………………………
[ INFO ] [2017-10-24 18:44:55] com.ethink.agent.task.executor.server.RDPUpdateExecutor [103] - rdp更新文件成功
[ ERROR] [2017-10-24 18:44:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [120] - 升级失败
java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:118)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
[ INFO ] [2017-10-24 18:44:56] com.ethink.agent.task.executor.server.RDPUpdateExecutor [257] - 文件地址为：http://192.168.4.61:8080/testweb/abc.zip文件名为abc.zip
[ INFO ] [2017-10-24 18:44:56] org.quartz.core.JobRunShell [207] - Job com.ethink.agent.task.bean.ServerTask_task.a3b5c6d7f09c8e6abbccddee55446677 threw a JobExecutionException: 
org.quartz.JobExecutionException: 升级失败
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:123)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at java.net.Socket.connect(Socket.java:538)
	at java.net.Socket.<init>(Socket.java:434)
	at java.net.Socket.<init>(Socket.java:211)
	at com.ethink.agent.net.RDPMessageSend.send(RDPMessageSend.java:29)
	at com.ethink.agent.net.SendMessage.send(SendMessage.java:49)
	at com.ethink.agent.task.executor.server.RDPUpdateExecutor.execute(RDPUpdateExecutor.java:118)
	... 2 common frames omitted
[ INFO ] [2017-10-24 18:44:56] com.ethink.agent.task.mng.TaskManager [58] - com.ethink.agent.task.mng.TaskManager的jobListener启动
[ INFO ] [2017-10-24 18:44:56] com.ethink.agent.task.mng.TaskStatusManager [59] - 数据库更新task任务状态成功,taskId:a3b5c6d7f09c8e6abbccddee55446677 任务状态：error
[ INFO ] [2017-10-24 18:44:59] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 18:45:10] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 18:45:21] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
[ INFO ] [2017-10-24 18:45:32] com.ethink.agent.net.RDPListening [42] - 10秒后再次连接rdp
